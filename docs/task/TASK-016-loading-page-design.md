# TASK-016: 丝滑加载页与过渡动画 UX 设计

## 1. 概述
**目标：** 通过实现一个丝滑、视觉美观的加载状态，增强用户体验，衔接导航和数据渲染之间的空隙。
**目的：** 消除页面加载时的“卡顿感”和白屏闪烁，给用户提供即时的视觉反馈。

## 2. 设计理念
*   **极简与品牌化：** 使用应用现有的视觉识别系统（Logo + 主题色）。
*   **感知性能：** 利用动画让等待时间感觉更短。
*   **稳定性：** 在内容准备好之前通过覆盖层避免布局偏移 (CLS)。

## 3. UI/UX 规范

### A. 全局加载遮罩层 ("幕布")
这是一个全屏遮罩，用于：
1.  **首次启动应用：** 用户首次访问网站时。
2.  **主要路由切换：** 导航到需要大量数据获取才能渲染的页面时。

**视觉元素：**
*   **背景：** 纯白 (`#ffffff`) 或略微米色的背景，以匹配应用主题。使用高 z-index 覆盖所有内容。
*   **中心元素：** 应用 Logo (`logo.png`)。
*   **动画 (由 GSAP 驱动)：**
    *   *呼吸效果：* Logo 轻柔地缩放（比例 1.0 到 1.1）并伴随柔和的透明度脉冲。
    *   *入场/退场：* 遮罩层应快速淡入 (0.2s) 但缓慢淡出 (0.5s)，以营造丝滑感。
*   **可选：** 如果等待时间超过 1 秒，在 Logo 下方显示一个微妙的不确定进度条或旋转加载器。

### B. 进度反馈 ("顶部条")
用于不需要全屏遮挡的快速导航。
*   **样式：** 视口顶部的细长 (2px) 进度条。
*   **颜色：** 品牌主色调（例如 Element UI 蓝或项目特定的强调色）。
*   **行为：** 快速开始，在 80% 左右慢下来，完成后瞬间冲到 100%。

## 4. 技术实现策略

### 1. 状态管理 (Vuex)
*   在 Vuex 中创建 `loading` 模块。
*   状态：`isLoading` (布尔值), `loadingType` ('global' | 'bar')。
*   变更 (Mutations)：`SET_LOADING(true/false)`。

### 2. 全局组件 (`AppLoading.vue`)
*   将 `<AppLoading />` 放置在 `App.vue` 中 `<router-view>` 的外部。
*   连接到 Vuex 的 `isLoading` 状态。
*   使用 `GSAP` 处理进入/离开的过渡动画。

### 3. 路由集成
*   使用 `router.beforeEach`：
    *   触发 `SET_LOADING(true)`。
*   使用 `router.afterEach`：
    *   触发 `SET_LOADING(false)`。
*   **防抖/最小持续时间：** 为了避免在快速网络下的“闪烁”，强制全屏加载器至少显示一段时间（例如 500ms）。

### 4. HTTP 拦截器集成 (Axios)
*   （可选但推荐）挂钩 Axios 的请求/响应，以便在后台 API 调用期间自动触发顶部进度条加载器。

## 5. 原型描述
*   **屏幕：** 空白画布。
*   **中心：** 简单的旋转加载动画 (Spinner)，主色调 (`#409EFF`)。
*   **动画：** 旋转动画。
*   **过渡：** 数据准备好后，白色背景淡出，露出下方已经渲染好的内容。

## 6. 任务清单
- [x] 创建带有 GSAP 动画的 `AppLoading.vue` 组件。
- [x] 在 Vuex store 中添加 `loading` 状态。
- [x] 将加载触发器集成到 `router/index.js` 守卫中。
- [x] 添加丝滑的淡出过渡逻辑。
- [x] 在快速与慢速网络条件下进行测试（使用 DevTools 节流）。