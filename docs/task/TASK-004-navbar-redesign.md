# Task 004 - 顶部导航栏现代化重构设计

> 复制本文件为 `docs/task/TASK-XXX-简短标题.md`，并在 `issue/README.md` 中登记。
>
> 约束：本文档只写“技术与方案描述 / 验证方式 / 结果”，不要粘贴任何代码片段（含配置片段/命令行脚本/SQL）。

## 任务内容
- **要做什么**：重构 `NavMenu` 组件，采用现代化的 UI 设计语言（如扁平化、简洁风格）替换旧版的过时样式。
- **为什么要做（背景/问题）**：
  - 当前导航栏样式陈旧（灰色背景、绝对定位文本），视觉吸引力不足。
  - 布局使用硬编码 `min-width` 和绝对定位，缺乏响应式能力。
  - 交互体验较差，缺少现代应用常见的用户头像、下拉菜单等直观元素。
  - “管理中心”作为文本菜单入口不够直观。
- **目标（可量化）**：
  - 移除所有绝对定位布局，改为 Flexbox 弹性布局。
  - 引入品牌 Logo 展示区。
  - 优化用户个人中心入口，使用头像+下拉菜单形式。
  - 提升视觉层次感，增加阴影或毛玻璃效果。
- **范围（包含/不包含）**：
  - **包含**：`NavMenu.vue` 的结构与样式重构。
  - **不包含**：后端接口修改，路由逻辑变更（仅优化触发方式）。
- **影响面（模块/接口/数据/用户）**：
  - 影响所有页面的顶部导航展示。
  - 用户交互流程更顺畅。

## 具体实施方案

### 设计理念
- **布局**：采用经典的 "Logo - NavLinks - UserActions" 三段式布局。
- **配色**：
  - 背景：纯白 (#FFFFFF) 或 带有轻微模糊的半透明背景，底部增加细微阴影 (`box-shadow`) 以区分内容层级。
  - 文字：深灰 (#333333) 为主，激活状态使用品牌主色（如珊瑚橙或自定义主题色）。
- **交互**：
  - 导航项 Hover 时显示底部线条或背景色淡入。
  - 用户区域使用 Avatar（头像）代替纯文本，点击/Hover 唤出下拉菜单。

### 关键决策
1.  **布局技术**：放弃 ElementUI 默认的 `mode="horizontal"` 内部布局限制，或者在 `el-menu` 外层包裹 Flex 容器，将 `el-menu` 仅作为中间导航部分，左右两侧分别放置 Logo 和 用户区域。或者完全自定义 Flex 布局容器，仅复用 Element 的组件（如 Dropdown）。
    - *决策*：保留 `el-menu` 用于核心导航链接以保持路由激活状态的逻辑，但通过 CSS 覆写使其背景透明，并嵌入到新的 Flex Header 容器中。
2.  **Logo 区域**：左侧新增 Logo 图片与 "FilmTalk" 品牌名称组合，增强品牌识别度。
3.  **用户中心**：右侧设计为用户头像（若无头像显示默认图标）+ 用户名组合。下拉菜单包含：个人资料、个人收藏、后台管理（权限控制）、注销。
4.  **Slogan 处理**：移除原有的绝对定位 Slogan，使界面更清爽。

### 步骤
1.  **结构清理**：移除旧版 `el-menu` 中杂乱的 `span` 绝对定位元素和行内样式。
2.  **容器搭建**：建立一个 Flex 容器 header，分为 Left (Brand), Center (Menu), Right (User)。
3.  **组件重组**：
    - Left: 插入 Logo 图片和应用名称。
    - Center: 放置简化的 `el-menu`，仅包含“首页”、“博客”、“影单”。
    - Right: 使用 `el-dropdown` 组件实现用户菜单，通过 Avatar 展示用户状态。
4.  **样式美化**：应用新的配色方案、字体间距和阴影效果。
5.  **逻辑优化**：将 `onclick="javascript:window.open..."` 改为 Vue Router 的 `push` 方法，避免页面全刷新（除非特定需要）。

## 过程验证
1. **验证点：布局响应性**
   - **观察/指标**：调整浏览器窗口宽度。
   - **通过标准**：导航栏元素（Logo、菜单、头像）在不同宽度下保持合理排列，不发生重叠或错位（虽然主要针对 PC 端，但应避免硬编码宽度导致的截断）。
2. **验证点：视觉样式**
   - **观察/指标**：查看背景色、阴影、字体颜色。
   - **通过标准**：符合现代审美（清爽、对比度合适），无旧版灰色背景和突兀的绝对定位文字。
3. **验证点：交互功能**
   - **观察/指标**：点击导航链接、Hover 用户头像。
   - **通过标准**：路由切换正常（高亮状态正确更新），下拉菜单弹出流畅，点击选项能跳转对应页面。

## 最终结果验证
- **验收项**：新版导航栏在所有主页面（首页、详情页）显示一致。
- **通过标准**：
  - 界面美观，符合 Task-004 的设计要求。
  - 只有管理员能看到“影评管理”等入口。
  - 游客显示“登录/注册”按钮，登录用户显示头像。
- **回归范围**：首页、博客列表页、影单页、个人中心。

## 风险与回滚
- **风险点**：修改 CSS 可能会意外影响全局 ElementUI 样式（如果未使用 `scoped` 或过度使用 `!important`）。
- **规避手段**：务必使用 CSS Modules 或 Scoped CSS，并尽量通过 class 选择器限定范围。
- **回滚策略**：Git revert 本次提交，恢复旧版 `NavMenu.vue`。

## 里程碑 / 截止时间
- **开始**：2026-01-16
- **截止**：2026-01-17

## 关联信息
- **对应 Issue**：N/A
- **相关 PR**：N/A
